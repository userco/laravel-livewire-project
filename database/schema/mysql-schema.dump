CREATE TABLE `locations` (
  `id` bigint unsigned NOT NULL AUTO_INCREMENT,
  `uuid` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `name` text COLLATE utf8mb4_unicode_ci NOT NULL,
  `slug` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'used for url of public registration form',
  `short_name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `country` text COLLATE utf8mb4_unicode_ci NOT NULL,
  `city` text COLLATE utf8mb4_unicode_ci NOT NULL,
  `address` text COLLATE utf8mb4_unicode_ci,
  `health_insurance_association_code` varchar(2) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'needed for OEGD export, "Krankenkassenärztliche Vereinigung" / "KV LANDES- ODER BEZIRKSSTELLENSCHLÜSSEL", eg "01" for Schleswig-Holstein, "72" for Berlin, see UtilHealthInsuranceAssociation',
  `google_maps_url` varchar(500) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `lat` decimal(8,6) DEFAULT NULL COMMENT 'geo coordinates - latitude',
  `lon` decimal(9,6) DEFAULT NULL COMMENT 'geo coordinates - longitude',
  `appointments_mode` enum('MANDATORY','OPTIONAL','NO_APPOINTMENTS') COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'OPTIONAL' COMMENT 'used for registration form to decide whether to show appointment-picker',
  `google_review_link` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `is_awol_alert_enabled` tinyint(1) DEFAULT NULL,
  `last_sent_awol_alert` datetime DEFAULT NULL,
  `zip` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `temperature` double(4,1) NOT NULL DEFAULT '20.0',
  `refrigerator_temperature` double(4,1) DEFAULT NULL,
  `min_wait_time` tinyint unsigned NOT NULL DEFAULT '5',
  `max_wait_time` tinyint unsigned NOT NULL DEFAULT '10',
  `max_tests_per_slot` int unsigned NOT NULL DEFAULT '1',
  `express_pcr_max_tests_per_slot` tinyint unsigned NOT NULL DEFAULT '1',
  `sameday_pcr_appointments_end_time` time DEFAULT '13:00:00',
  `public` tinyint(1) NOT NULL DEFAULT '1',
  `is_visible_for_operators` tinyint(1) NOT NULL DEFAULT '1',
  `loyalty_program` tinyint(1) NOT NULL DEFAULT '0',
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `deleted_at` timestamp NULL DEFAULT NULL,
  `closing_hour` tinyint unsigned NOT NULL DEFAULT '22',
  `opening_hour` tinyint unsigned NOT NULL DEFAULT '10',
  `has_signopad` tinyint(1) NOT NULL DEFAULT '1',
  `has_qr_scanner` tinyint(1) NOT NULL DEFAULT '0' COMMENT 'used for deciding, whether to show QR code in booking confirmation mail or not.',
  `has_one_laptop` tinyint(1) NOT NULL DEFAULT '0',
  `check_sample_given` tinyint(1) NOT NULL DEFAULT '0',
  `check_health_information` tinyint(1) NOT NULL DEFAULT '0',
  `default_health_authority_code` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'german health authority code, used if no health authority could be found for a covid test',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
CREATE TABLE `test_types` (
  `id` bigint unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `public_name` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `invoice_label` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `email_label_en` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `email_label_de` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `color_code` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `operator_label` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `default_price` decimal(10,2) DEFAULT NULL COMMENT 'this is the default price, can be overridden for each location',
  `baercode_test_type` int unsigned DEFAULT NULL,
  `detection_method` enum('ANTIGEN','PCR','ANTIBODY') CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `cwa_mode` enum('NO_CWA','ANTIGEN_CWA','PCR_CWA') COLLATE utf8mb4_unicode_ci NOT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `deleted_at` timestamp NULL DEFAULT NULL,
  `signature_needed` tinyint(1) NOT NULL DEFAULT '0',
  `sort` int NOT NULL DEFAULT '0',
  `image` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '/img/test-type-images/No_image_available.svg' COMMENT 'for the registration form',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
CREATE TABLE `ltt_appointments_disabled` (
  `id` bigint unsigned NOT NULL AUTO_INCREMENT,
  `location_id` bigint unsigned NOT NULL,
  `test_type_id` bigint unsigned NOT NULL,
  `day_of_week` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `from` time NOT NULL,
  `to` time NOT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `deleted_at` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `ltt_appointments_disabled_location_id_foreign` (`location_id`),
  KEY `ltt_appointments_disabled_test_type_id_foreign` (`test_type_id`),
  CONSTRAINT `ltt_appointments_disabled_location_id_foreign` FOREIGN KEY (`location_id`) REFERENCES `locations` (`id`),
  CONSTRAINT `ltt_appointments_disabled_test_type_id_foreign` FOREIGN KEY (`test_type_id`) REFERENCES `test_types` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
CREATE TABLE `sessions` (
  `payload` mediumtext NOT NULL,
  `id` int(11) NOT NULL,
  `ip_address` varchar(256) NOT NULL,
  `pages_id` varchar(256) NOT NULL,
  `ts` varchar(256) NOT NULL,
  `user_agent` varchar(256) NOT NULL,
  `user_id` varchar(256) NOT NULL,
  `last_activity` unsigned
) ENGINE=MyISAM DEFAULT CHARSET=latin1;